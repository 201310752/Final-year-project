9999999999s:16055:"(function(root,factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory)}else if(typeof exports==='object'){module.exports=factory(require('jquery'))}else{root.sortable=factory(root.jQuery)}}(this,function($){'use strict';var dragging;var draggingHeight;var placeholders=$();var sortables=[];var _removeItemEvents=function(items){items.off('dragstart.h5s');items.off('dragend.h5s');items.off('selectstart.h5s');items.off('dragover.h5s');items.off('dragenter.h5s');items.off('drop.h5s')};var _removeSortableEvents=function(sortable){sortable.off('dragover.h5s');sortable.off('dragenter.h5s');sortable.off('drop.h5s')};var _attachGhost=function(event,ghost){event.dataTransfer.effectAllowed='move';event.dataTransfer.setData('text','');if(event.dataTransfer.setDragImage){event.dataTransfer.setDragImage(ghost.item,ghost.x,ghost.y)}};var _addGhostPos=function(e,ghost){if(!ghost.x){ghost.x=parseInt(e.pageX-ghost.draggedItem.offset().left)}
if(!ghost.y){ghost.y=parseInt(e.pageY-ghost.draggedItem.offset().top)}
return ghost};var _makeGhost=function($draggedItem){return{item:$draggedItem[0],draggedItem:$draggedItem}};var _getGhost=function(event,$draggedItem){var ghost=_makeGhost($draggedItem);ghost=_addGhostPos(event,ghost);_attachGhost(event,ghost)};var _getOptions=function(soptions,options){if(typeof soptions==='undefined'){return options}
return soptions};var _removeSortableData=function(sortable){sortable.removeData('opts');sortable.removeData('connectWith');sortable.removeData('items');sortable.removeAttr('aria-dropeffect')};var _removeItemData=function(items){items.removeAttr('aria-grabbed');items.removeAttr('draggable');items.removeAttr('role')};var _listsConnected=function(curList,destList){if(curList[0]===destList[0]){return!0}
if(curList.data('connectWith')!==undefined){return curList.data('connectWith')===destList.data('connectWith')}
return!1};var _destroySortable=function(sortable){var opts=sortable.data('opts')||{};var items=sortable.children(opts.items);var handles=opts.handle?items.find(opts.handle):items;_removeSortableEvents(sortable);_removeSortableData(sortable);handles.off('mousedown.h5s');_removeItemEvents(items);_removeItemData(items)};var _enableSortable=function(sortable){var opts=sortable.data('opts');var items=sortable.children(opts.items);var handles=opts.handle?items.find(opts.handle):items;sortable.attr('aria-dropeffect','move');handles.attr('draggable','true');var spanEl=(document||window.document).createElement('span');if(typeof spanEl.dragDrop==='function'&&!opts.disableIEFix){handles.on('mousedown.h5s',function(){if(items.index(this)!==-1){this.dragDrop()}else{$(this).parents(opts.items)[0].dragDrop()}})}};var _disableSortable=function(sortable){var opts=sortable.data('opts');var items=sortable.children(opts.items);var handles=opts.handle?items.find(opts.handle):items;sortable.attr('aria-dropeffect','none');handles.attr('draggable',!1);handles.off('mousedown.h5s')};var _reloadSortable=function(sortable){var opts=sortable.data('opts');var items=sortable.children(opts.items);var handles=opts.handle?items.find(opts.handle):items;_removeItemEvents(items);handles.off('mousedown.h5s');_removeSortableEvents(sortable)};var sortable=function(selector,options){var $sortables=$(selector);var method=String(options);options=$.extend({connectWith:!1,placeholder:null,dragImage:null,disableIEFix:!1,placeholderClass:'sortable-placeholder',draggingClass:'sortable-dragging',hoverClass:!1},options);return $sortables.each(function(){var $sortable=$(this);if(/enable|disable|destroy/.test(method)){sortable[method]($sortable);return}
options=_getOptions($sortable.data('opts'),options);$sortable.data('opts',options);_reloadSortable($sortable);var items=$sortable.children(options.items);var index;var startParent;var newParent;var placeholder=(options.placeholder===null)?$('<'+(/^ul|ol$/i.test(this.tagName)?'li':'div')+' class="'+options.placeholderClass+'"/>'):$(options.placeholder).addClass(options.placeholderClass);if(!$sortable.attr('data-sortable-id')){var id=sortables.length;sortables[id]=$sortable;$sortable.attr('data-sortable-id',id);items.attr('data-item-sortable-id',id)}
$sortable.data('items',options.items);placeholders=placeholders.add(placeholder);if(options.connectWith){$sortable.data('connectWith',options.connectWith)}
_enableSortable($sortable);items.attr('role','option');items.attr('aria-grabbed','false');if(options.hoverClass){var hoverClass='sortable-over';if(typeof options.hoverClass==='string'){hoverClass=options.hoverClass}
items.hover(function(){$(this).addClass(hoverClass)},function(){$(this).removeClass(hoverClass)})}
items.on('dragstart.h5s',function(e){e.stopImmediatePropagation();if(options.dragImage){_attachGhost(e.originalEvent,{item:options.dragImage,x:0,y:0});console.log('WARNING: dragImage option is deprecated'+' and will be removed in the future!')}else{_getGhost(e.originalEvent,$(this),options.dragImage)}
dragging=$(this);dragging.addClass(options.draggingClass);dragging.attr('aria-grabbed','true');index=dragging.index();draggingHeight=dragging.height();startParent=$(this).parent();dragging.parent().triggerHandler('sortstart',{item:dragging,placeholder:placeholder,startparent:startParent})});items.on('dragend.h5s',function(){if(!dragging){return}
dragging.removeClass(options.draggingClass);dragging.attr('aria-grabbed','false');dragging.show();placeholders.detach();newParent=$(this).parent();dragging.parent().triggerHandler('sortstop',{item:dragging,startparent:startParent,});if(index!==dragging.index()||startParent.get(0)!==newParent.get(0)){dragging.parent().triggerHandler('sortupdate',{item:dragging,index:newParent.children(newParent.data('items')).index(dragging),oldindex:items.index(dragging),elementIndex:dragging.index(),oldElementIndex:index,startparent:startParent,endparent:newParent})}
dragging=null;draggingHeight=null});$(this).add([placeholder]).on('drop.h5s',function(e){if(!_listsConnected($sortable,$(dragging).parent())){return}
e.stopPropagation();placeholders.filter(':visible').after(dragging);dragging.trigger('dragend.h5s');return!1});items.add([this]).on('dragover.h5s dragenter.h5s',function(e){if(!_listsConnected($sortable,$(dragging).parent())){return}
e.preventDefault();e.originalEvent.dataTransfer.dropEffect='move';if(items.is(this)){var thisHeight=$(this).height();if(options.forcePlaceholderSize){placeholder.height(draggingHeight)}
if(thisHeight>draggingHeight){var deadZone=thisHeight-draggingHeight;var offsetTop=$(this).offset().top;if(placeholder.index()<$(this).index()&&e.originalEvent.pageY<offsetTop+deadZone){return!1}
if(placeholder.index()>$(this).index()&&e.originalEvent.pageY>offsetTop+thisHeight-deadZone){return!1}}
dragging.hide();if(placeholder.index()<$(this).index()){$(this).after(placeholder)}else{$(this).before(placeholder)}
placeholders.not(placeholder).detach()}else{if(!placeholders.is(this)&&!$(this).children(options.items).length){placeholders.detach();$(this).append(placeholder)}}
return!1})})};sortable.destroy=function(sortable){_destroySortable(sortable)};sortable.enable=function(sortable){_enableSortable(sortable)};sortable.disable=function(sortable){_disableSortable(sortable)};$.fn.sortable=function(options){return sortable(this,options)};return sortable}));'use strict';System.register('sijad/links/addLinksPane',['flarum/extend','flarum/components/AdminNav','flarum/components/AdminLinkButton','sijad/links/components/LinksPage'],function(_export,_context){var extend,AdminNav,AdminLinkButton,LinksPage;_export('default',function(){app.routes.links={path:'/links',component:LinksPage.component()};app.extensionSettings['sijad-links']=function(){return m.route(app.route('links'))};extend(AdminNav.prototype,'items',function(items){items.add('links',AdminLinkButton.component({href:app.route('links'),icon:'bars',children:app.translator.trans('sijad-links.admin.nav.links_button'),description:app.translator.trans('sijad-links.admin.nav.links_text')}))})});return{setters:[function(_flarumExtend){extend=_flarumExtend.extend},function(_flarumComponentsAdminNav){AdminNav=_flarumComponentsAdminNav.default},function(_flarumComponentsAdminLinkButton){AdminLinkButton=_flarumComponentsAdminLinkButton.default},function(_sijadLinksComponentsLinksPage){LinksPage=_sijadLinksComponentsLinksPage.default}],execute:function(){}}});'use strict';System.register('sijad/links/components/EditLinkModal',['flarum/components/Modal','flarum/components/Button','flarum/utils/string'],function(_export,_context){var Modal,Button,slug,EditlinksModal;return{setters:[function(_flarumComponentsModal){Modal=_flarumComponentsModal.default},function(_flarumComponentsButton){Button=_flarumComponentsButton.default},function(_flarumUtilsString){slug=_flarumUtilsString.slug}],execute:function(){EditlinksModal=function(_Modal){babelHelpers.inherits(EditlinksModal,_Modal);function EditlinksModal(){babelHelpers.classCallCheck(this,EditlinksModal);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(EditlinksModal).apply(this,arguments))}
babelHelpers.createClass(EditlinksModal,[{key:'init',value:function init(){babelHelpers.get(Object.getPrototypeOf(EditlinksModal.prototype),'init',this).call(this);this.link=this.props.link||app.store.createRecord('links');this.itemTitle=m.prop(this.link.title()||'');this.url=m.prop(this.link.url()||'');this.isInternal=m.prop(this.link.isInternal()&&!0);this.isNewtab=m.prop(this.link.isNewtab()&&!0)}},{key:'className',value:function className(){return'EditLinkModal Modal--small'}},{key:'title',value:function title(){var title=this.itemTitle();return title?title:app.translator.trans('sijad-links.admin.edit_link.title')}},{key:'content',value:function content(){var _this2=this;return m('div',{className:'Modal-body'},m('div',{className:'Form'},m('div',{className:'Form-group'},m('label',null,app.translator.trans('sijad-links.admin.edit_link.title_label')),m('input',{className:'FormControl',placeholder:app.translator.trans('sijad-links.admin.edit_link.title_placeholder'),value:this.itemTitle(),oninput:function oninput(e){_this2.itemTitle(e.target.value)}})),m('div',{className:'Form-group'},m('label',null,app.translator.trans('sijad-links.admin.edit_link.url_label')),m('input',{className:'FormControl',placeholder:app.translator.trans('sijad-links.admin.edit_link.url_placeholder'),type:'url',value:this.url(),oninput:function oninput(e){_this2.url(e.target.value)}})),m('div',{className:'Form-group'},m('div',null,m('label',{className:'checkbox'},m('input',{type:'checkbox',value:'1',checked:this.isInternal(),onchange:function onchange(e){if(_this2.isInternal(e.target.checked)){_this2.isNewtab(!1)}}}),app.translator.trans('sijad-links.admin.edit_link.internal_link')),m('label',{className:'checkbox'},m('input',{type:'checkbox',value:'1',checked:this.isNewtab(),onchange:function onchange(e){if(_this2.isNewtab(e.target.checked)){_this2.isInternal(!1)}}}),app.translator.trans('sijad-links.admin.edit_link.open_newtab')))),m('div',{className:'Form-group'},Button.component({type:'submit',className:'Button Button--primary EditLinkModal-save',loading:this.loading,children:app.translator.trans('sijad-links.admin.edit_link.submit_button')}),this.link.exists?m('button',{type:'button',className:'Button EditLinkModal-delete',onclick:this.delete.bind(this)},app.translator.trans('sijad-links.admin.edit_link.delete_link_button')):'')))}},{key:'onsubmit',value:function onsubmit(e){var _this3=this;e.preventDefault();this.loading=!0;this.link.save({title:this.itemTitle(),url:this.url(),isInternal:this.isInternal(),isNewtab:this.isNewtab()}).then(function(){return _this3.hide()},function(response){_this3.loading=!1;_this3.handleErrors(response)})}},{key:'delete',value:function _delete(){if(confirm(app.translator.trans('sijad-links.admin.edit_link.delete_link_confirmation'))){this.link.delete().then(function(){return m.redraw()});this.hide()}}}]);return EditlinksModal}(Modal);_export('default',EditlinksModal)}}});'use strict';System.register('sijad/links/components/LinksPage',['flarum/components/Page','flarum/components/Button','sijad/links/components/EditLinkModal','sijad/links/utils/sortLinks'],function(_export,_context){var Page,Button,EditLinkModal,sortLinks,LinksPage;function LinkItem(link){return m('li',{'data-id':link.id()},m('div',{className:'LinkListItem-info'},m('span',{className:'LinkListItem-name'},link.title()),Button.component({className:'Button Button--link',icon:'pencil',onclick:function onclick(){return app.modal.show(new EditLinkModal({link:link}))}})))}
return{setters:[function(_flarumComponentsPage){Page=_flarumComponentsPage.default},function(_flarumComponentsButton){Button=_flarumComponentsButton.default},function(_sijadLinksComponentsEditLinkModal){EditLinkModal=_sijadLinksComponentsEditLinkModal.default},function(_sijadLinksUtilsSortLinks){sortLinks=_sijadLinksUtilsSortLinks.default}],execute:function(){LinksPage=function(_Page){babelHelpers.inherits(LinksPage,_Page);function LinksPage(){babelHelpers.classCallCheck(this,LinksPage);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(LinksPage).apply(this,arguments))}
babelHelpers.createClass(LinksPage,[{key:'view',value:function view(){return m('div',{className:'LinksPage'},m('div',{className:'LinksPage-header'},m('div',{className:'container'},m('p',null,app.translator.trans('sijad-links.admin.links.about_text')),Button.component({className:'Button Button--primary',icon:'plus',children:app.translator.trans('sijad-links.admin.links.create_button'),onclick:function onclick(){return app.modal.show(new EditLinkModal())}}))),m('div',{className:'LinksPage-list'},m('div',{className:'container'},m('div',{className:'LinkItems'},m('label',null,app.translator.trans('sijad-links.admin.links.links')),m('ol',{className:'LinkList'},sortLinks(app.store.all('links')).map(LinkItem))))))}},{key:'config',value:function config(){var _this2=this;this.$('ol').sortable().on('sortupdate',function(e,ui){var order=_this2.$('.LinkList > li').map(function(){return{id:$(this).data('id')}}).get();order.forEach(function(link,i){var item=app.store.getById('links',link.id);item.pushData({attributes:{position:i}})});app.request({url:app.forum.attribute('apiUrl')+'/links/order',method:'POST',data:{order:order}});m.redraw.strategy('all');m.redraw()})}}]);return LinksPage}(Page);_export('default',LinksPage)}}});'use strict';System.register('sijad/links/main',['sijad/links/models/Link','sijad/links/addLinksPane'],function(_export,_context){var Link,addLinksPane;return{setters:[function(_sijadLinksModelsLink){Link=_sijadLinksModelsLink.default},function(_sijadLinksAddLinksPane){addLinksPane=_sijadLinksAddLinksPane.default}],execute:function(){app.initializers.add('sijad-links',function(app){app.store.models.links=Link;addLinksPane()})}}});'use strict';System.register('sijad/links/models/Link',['flarum/Model','flarum/utils/mixin','flarum/utils/computed'],function(_export,_context){var Model,mixin,computed,Link;return{setters:[function(_flarumModel){Model=_flarumModel.default},function(_flarumUtilsMixin){mixin=_flarumUtilsMixin.default},function(_flarumUtilsComputed){computed=_flarumUtilsComputed.default}],execute:function(){Link=function(_mixin){babelHelpers.inherits(Link,_mixin);function Link(){babelHelpers.classCallCheck(this,Link);return babelHelpers.possibleConstructorReturn(this,Object.getPrototypeOf(Link).apply(this,arguments))}
return Link}(mixin(Model,{title:Model.attribute('title'),type:Model.attribute('type'),url:Model.attribute('url'),position:Model.attribute('position'),isInternal:Model.attribute('isInternal'),isNewtab:Model.attribute('isNewtab')}));_export('default',Link)}}});"use strict";System.register("sijad/links/utils/sortLinks",[],function(_export,_context){function sortLinks(links){return links.slice(0).sort(function(a,b){var aPos=a.position();var bPos=b.position();if(bPos===null)return-1;if(aPos===null)return 1;return a.position()-b.position()})}
_export("default",sortLinks);return{setters:[],execute:function(){}}})";